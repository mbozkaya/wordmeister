{"ast":null,"code":"import PropTypes from 'prop-types';\nimport { loading } from './Loading';\nexport const Fetch = (url, requestOptions) => {\n  loading();\n  return fetch(url, requestOptions).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    if (response.status === 401) {\n      localStorage.removeItem('user');\n      if (window.location.pathname !== '/') window.location = '/';\n    }\n\n    if (response.status === 400) {\n      return response.json();\n    } else {\n      throw new Error();\n    }\n\n    return false;\n  }).then(json => {\n    loading();\n    return json;\n  }).catch(ex => {\n    loading();\n    console.error(ex);\n    return false;\n  });\n};\nFetch.propTypes = {\n  url: PropTypes.string.isRequired,\n  requestOptions: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["C:/Repository/wordmeister/wm-ui/src/components/Fetch.js"],"names":["PropTypes","loading","Fetch","url","requestOptions","fetch","then","response","ok","json","status","localStorage","removeItem","window","location","pathname","Error","catch","ex","console","error","propTypes","string","isRequired","object"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,GAAD,EAAMC,cAAN,KAAyB;AAC1CH,EAAAA,OAAO;AAEP,SAAQI,KAAK,CAACF,GAAD,EAAMC,cAAN,CAAL,CACHE,IADG,CACEC,QAAQ,IAAI;AACd,QAAIA,QAAQ,CAACC,EAAb,EAAiB;AACb,aAAOD,QAAQ,CAACE,IAAT,EAAP;AACH;;AACD,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AACzBC,MAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACA,UAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,GAAjC,EAAsCF,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACzC;;AACD,QAAIP,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AACzB,aAAOH,QAAQ,CAACE,IAAT,EAAP;AACH,KAFD,MAGK;AACD,YAAM,IAAIO,KAAJ,EAAN;AACH;;AACD,WAAO,KAAP;AACH,GAhBG,EAiBHV,IAjBG,CAiBEG,IAAI,IAAI;AACVR,IAAAA,OAAO;AACP,WAAOQ,IAAP;AACH,GApBG,EAqBHQ,KArBG,CAqBGC,EAAE,IAAI;AACTjB,IAAAA,OAAO;AACPkB,IAAAA,OAAO,CAACC,KAAR,CAAcF,EAAd;AACA,WAAO,KAAP;AACH,GAzBG,CAAR;AA2BH,CA9BM;AAgCPhB,KAAK,CAACmB,SAAN,GAAkB;AACdlB,EAAAA,GAAG,EAAEH,SAAS,CAACsB,MAAV,CAAiBC,UADR;AAEdnB,EAAAA,cAAc,EAAEJ,SAAS,CAACwB,MAAV,CAAiBD;AAFnB,CAAlB","sourcesContent":["import PropTypes from 'prop-types';\nimport { loading } from './Loading';\n\nexport const Fetch = (url, requestOptions) => {\n    loading();\n\n    return (fetch(url, requestOptions)\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            }\n            if (response.status === 401) {\n                localStorage.removeItem('user');\n                if (window.location.pathname !== '/') window.location = '/';\n            }\n            if (response.status === 400) {\n                return response.json();\n            }\n            else {\n                throw new Error();\n            }\n            return false;\n        })\n        .then(json => {\n            loading();\n            return json;\n        })\n        .catch(ex => {\n            loading();\n            console.error(ex);\n            return false;\n        })\n    );\n};\n\nFetch.propTypes = {\n    url: PropTypes.string.isRequired,\n    requestOptions: PropTypes.object.isRequired,\n};"]},"metadata":{},"sourceType":"module"}