{"ast":null,"code":"'use strict';\n\nimport { useEffect, useState } from 'react';\nimport throttle from 'lodash.throttle';\nexport default ((offset = 0) => {\n  const [ref, setRef] = useState(null);\n  const [inView, setInView] = useState(false);\n  useEffect(() => {\n    const elementYPos = () => {\n      return ref.getBoundingClientRect().top + window.pageYOffset - window.innerHeight + offset;\n    };\n\n    if (!ref) {\n      return;\n    }\n\n    const handleScroll = throttle(() => {\n      if (!ref) {\n        return;\n      }\n\n      if (window.pageYOffset >= elementYPos()) {\n        window.removeEventListener('scroll', handleScroll);\n        setInView(true);\n      }\n    }, 200);\n    window.addEventListener('scroll', handleScroll, {\n      passive: true\n    });\n    handleScroll();\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [ref, offset]);\n  return [setRef, inView];\n});","map":{"version":3,"sources":["C:/Repository/wordmeister/wm-ui/node_modules/use-in-view/index.js"],"names":["useEffect","useState","throttle","offset","ref","setRef","inView","setInView","elementYPos","getBoundingClientRect","top","window","pageYOffset","innerHeight","handleScroll","removeEventListener","addEventListener","passive"],"mappings":"AAAA;;AACA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,OAAOC,QAAP,MAAqB,iBAArB;AAEA,gBAAe,CAACC,MAAM,GAAG,CAAV,KAAgB;AAC9B,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBJ,QAAQ,CAAC,IAAD,CAA9B;AACA,QAAM,CAACK,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,KAAD,CAApC;AACAD,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMQ,WAAW,GAAG,MAAM;AACzB,aACCJ,GAAG,CAACK,qBAAJ,GAA4BC,GAA5B,GACAC,MAAM,CAACC,WADP,GAEAD,MAAM,CAACE,WAFP,GAGAV,MAJD;AAMA,KAPD;;AASA,QAAI,CAACC,GAAL,EAAU;AACT;AACA;;AAED,UAAMU,YAAY,GAAGZ,QAAQ,CAAC,MAAM;AACnC,UAAI,CAACE,GAAL,EAAU;AACT;AACA;;AAED,UAAIO,MAAM,CAACC,WAAP,IAAsBJ,WAAW,EAArC,EAAyC;AACxCG,QAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC;AACAP,QAAAA,SAAS,CAAC,IAAD,CAAT;AACA;AACD,KAT4B,EAS1B,GAT0B,CAA7B;AAUAI,IAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkCF,YAAlC,EAAgD;AAACG,MAAAA,OAAO,EAAE;AAAV,KAAhD;AACAH,IAAAA,YAAY;AAEZ,WAAO,MAAMH,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC,CAAb;AACA,GA5BQ,EA4BN,CAACV,GAAD,EAAMD,MAAN,CA5BM,CAAT;AA8BA,SAAO,CAACE,MAAD,EAASC,MAAT,CAAP;AACA,CAlCD","sourcesContent":["'use strict';\nimport {useEffect, useState} from 'react';\nimport throttle from 'lodash.throttle';\n\nexport default (offset = 0) => {\n\tconst [ref, setRef] = useState(null);\n\tconst [inView, setInView] = useState(false);\n\tuseEffect(() => {\n\t\tconst elementYPos = () => {\n\t\t\treturn (\n\t\t\t\tref.getBoundingClientRect().top +\n\t\t\t\twindow.pageYOffset -\n\t\t\t\twindow.innerHeight +\n\t\t\t\toffset\n\t\t\t);\n\t\t};\n\n\t\tif (!ref) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleScroll = throttle(() => {\n\t\t\tif (!ref) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (window.pageYOffset >= elementYPos()) {\n\t\t\t\twindow.removeEventListener('scroll', handleScroll);\n\t\t\t\tsetInView(true);\n\t\t\t}\n\t\t}, 200);\n\t\twindow.addEventListener('scroll', handleScroll, {passive: true});\n\t\thandleScroll();\n\n\t\treturn () => window.removeEventListener('scroll', handleScroll);\n\t}, [ref, offset]);\n\n\treturn [setRef, inView];\n};\n"]},"metadata":{},"sourceType":"module"}