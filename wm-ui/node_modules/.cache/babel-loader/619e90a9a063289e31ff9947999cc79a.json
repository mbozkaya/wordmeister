{"ast":null,"code":"import PropTypes from 'prop-types';\nimport { loading } from './Loading'; // eslint-disable-next-line import/prefer-default-export\n\nexport const Fetch = (url, requestOptions) => {\n  loading();\n  return fetch(url, requestOptions).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    if (response.status === 401) {\n      localStorage.removeItem('user');\n      if (window.location.pathname !== '/') window.location = '/';\n    }\n\n    if (response.status === 400) {\n      return response.json();\n    }\n\n    throw new Error();\n  }).then(json => {\n    loading();\n    return json;\n  }).catch(ex => {\n    loading();\n    console.error(ex);\n    return false;\n  });\n};\nFetch.propTypes = {\n  url: PropTypes.string.isRequired,\n  requestOptions: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["C:/Repository/wordmeister/wm-ui/src/components/Fetch.js"],"names":["PropTypes","loading","Fetch","url","requestOptions","fetch","then","response","ok","json","status","localStorage","removeItem","window","location","pathname","Error","catch","ex","console","error","propTypes","string","isRequired","object"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,WAAxB,C,CAEA;;AACA,OAAO,MAAMC,KAAK,GAAG,CAACC,GAAD,EAAMC,cAAN,KAAyB;AAC5CH,EAAAA,OAAO;AAEP,SAAQI,KAAK,CAACF,GAAD,EAAMC,cAAN,CAAL,CACLE,IADK,CACCC,QAAD,IAAc;AAClB,QAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,aAAOD,QAAQ,CAACE,IAAT,EAAP;AACD;;AACD,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BC,MAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACA,UAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,GAAjC,EAAsCF,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACvC;;AACD,QAAIP,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,aAAOH,QAAQ,CAACE,IAAT,EAAP;AACD;;AACD,UAAM,IAAIO,KAAJ,EAAN;AACD,GAbK,EAcLV,IAdK,CAcCG,IAAD,IAAU;AACdR,IAAAA,OAAO;AACP,WAAOQ,IAAP;AACD,GAjBK,EAkBLQ,KAlBK,CAkBEC,EAAD,IAAQ;AACbjB,IAAAA,OAAO;AACPkB,IAAAA,OAAO,CAACC,KAAR,CAAcF,EAAd;AACA,WAAO,KAAP;AACD,GAtBK,CAAR;AAwBD,CA3BM;AA6BPhB,KAAK,CAACmB,SAAN,GAAkB;AAChBlB,EAAAA,GAAG,EAAEH,SAAS,CAACsB,MAAV,CAAiBC,UADN;AAEhBnB,EAAAA,cAAc,EAAEJ,SAAS,CAACwB,MAAV,CAAiBD;AAFjB,CAAlB","sourcesContent":["import PropTypes from 'prop-types';\nimport { loading } from './Loading';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const Fetch = (url, requestOptions) => {\n  loading();\n\n  return (fetch(url, requestOptions)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      if (response.status === 401) {\n        localStorage.removeItem('user');\n        if (window.location.pathname !== '/') window.location = '/';\n      }\n      if (response.status === 400) {\n        return response.json();\n      }\n      throw new Error();\n    })\n    .then((json) => {\n      loading();\n      return json;\n    })\n    .catch((ex) => {\n      loading();\n      console.error(ex);\n      return false;\n    })\n  );\n};\n\nFetch.propTypes = {\n  url: PropTypes.string.isRequired,\n  requestOptions: PropTypes.object.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}